---
title: "Análise Exploratória de Dados da Educação Superior em R"
output: html_notebook
---

---

# 1. Introdução

Neste notebook do R iremos analisar microdados educacionais extraidos do [Senso Educacional 2024](https://www.gov.br/inep/pt-br/acesso-a-informacao/dados-abertos/microdados/censo-da-educacao-superior)


# 2. Lendo os dados
Os comandos abaixo fará a leitura dos seguintes dados:

- Dicionário de dados onde contem ...
- Cadastro de cursos superiores
- Cadastro das instituições de educação, abrangendo Universidades e Institutos Federais

```{r message=FALSE, warning=FALSE}
library(readxl)
library(readr)
library(dplyr)
library(tidyr)
library(ggplot2)
```


# Dicionário de dados
```{r}
disc_dados <- read_excel("~/FCM - Projeto Final/Projeto_Ferramentas_Computacionais/microdados_censo_da_educacao_superior_2024/microdados_censo_da_educacao_superior_2024/Anexos/ANEXO I - Dicionário de Dados/dicionário_dados_educação_superior.xlsx")
```

# Cursos
```{r}
cadastro_cursos <- read.csv(
  "~/FCM - Projeto Final/Projeto_Ferramentas_Computacionais/microdados_censo_da_educacao_superior_2024/microdados_censo_da_educacao_superior_2024/dados/MICRODADOS_CADASTRO_CURSOS_2024.CSV",
  sep = ";",
  encoding = "latin1"
)
```


# Cadastro de Instituições
```{r}
microdados_ies <- read.csv(
  "~/FCM - Projeto Final/Projeto_Ferramentas_Computacionais/microdados_censo_da_educacao_superior_2024/microdados_censo_da_educacao_superior_2024/dados/MICRODADOS_ED_SUP_IES_2024.CSV",
  sep = ";",
  encoding = "latin1",
  header = TRUE
)
```

# População por UF
```{r}
POP_UF <- read_excel("~/FCM - Projeto Final/Projeto_Ferramentas_Computacionais/dados_populacionais/POP_UF.xls")
```

# 3.7 Perfil dos Alunos

# 3.7.1 Matrículas vs Concluintes 
Objetivo: Comparar o número de alunos matriculados com o número de concluintes.

```{r fig.width=8, fig.height=5}
library(scales)  # se ainda não tiver carregado

matriculas_concluintes <- cadastro_cursos %>%
  summarise(
    Matrículas = sum(QT_MAT, na.rm = TRUE),
    Concluintes = sum(QT_CONC, na.rm = TRUE)
  ) %>%
  pivot_longer(cols = everything(),
               names_to = "Categoria",
               values_to = "Quantidade")

ggplot(matriculas_concluintes, aes(x = Categoria, y = Quantidade, fill = Categoria)) +
  geom_col() +
  labs(
    title = "Figura Z: Comparativo entre Matrículas e Concluintes",
    x = "Categoria",
    y = "Quantidade de Alunos"
  ) +
  scale_y_continuous(labels = label_comma(big.mark = ".", decimal.mark = ",")) +
  theme_minimal() +
  theme(legend.position = "none")
```

# 3.7.2 Faixa Etária
Objetivo: Mostrar a distribuição dos alunos por faixa etária. 

```{r fig.width=8, fig.height=5}
library(scales)  # garante que a função label_comma esteja disponível

faixa_etaria <- cadastro_cursos %>%
  summarise(
    `0-17`   = sum(QT_ING_0_17, na.rm = TRUE),
    `18-24`  = sum(QT_ING_18_24, na.rm = TRUE),
    `25-29`  = sum(QT_ING_25_29, na.rm = TRUE),
    `30-34`  = sum(QT_ING_30_34, na.rm = TRUE),
    `35-39`  = sum(QT_ING_35_39, na.rm = TRUE),
    `40-49`  = sum(QT_ING_40_49, na.rm = TRUE),
    `50-59`  = sum(QT_ING_50_59, na.rm = TRUE),
    `60+`    = sum(QT_ING_60_MAIS, na.rm = TRUE)
  ) %>%
  pivot_longer(cols = everything(),
               names_to = "Faixa_Etaria",
               values_to = "Quantidade")

ggplot(faixa_etaria, aes(x = Faixa_Etaria, y = Quantidade, fill = Faixa_Etaria)) +
  geom_col() +
  labs(
    title = "Figura X: Distribuição de Alunos por Faixa Etária",
    x = "Faixa Etária",
    y = "Quantidade de Alunos"
  ) +
  scale_y_continuous(labels = label_comma(big.mark = ".", decimal.mark = ",")) +
  theme_minimal() +
  theme(legend.position = "none")
```



# 3.7.3 Etnia
Objetivo: Apresentar a composição étnica dos alunos.

```{r fig.width=8, fig.height=5}
library(scales)  # garante que label_comma esteja disponível

etnia <- cadastro_cursos %>%
  summarise(
    Branca = sum(QT_ING_BRANCA, na.rm = TRUE),
    Preta = sum(QT_ING_PRETA, na.rm = TRUE),
    Parda = sum(QT_ING_PARDA, na.rm = TRUE),
    Amarela = sum(QT_ING_AMARELA, na.rm = TRUE),
    Indígena = sum(QT_ING_INDIGENA, na.rm = TRUE),
    Sem_Informação = sum(QT_ING_CORND, na.rm = TRUE)
  ) %>%
  pivot_longer(cols = everything(),
               names_to = "Etnia",
               values_to = "Quantidade")

ggplot(etnia, aes(x = Etnia, y = Quantidade, fill = Etnia)) +
  geom_col() +
  labs(
    title = "Figura Y: Distribuição de Alunos por Etnia",
    x = "Etnia",
    y = "Quantidade de Alunos"
  ) +
  scale_y_continuous(labels = label_comma(big.mark = ".", decimal.mark = ",")) +
  theme_minimal() +
  theme(legend.position = "none")
```
